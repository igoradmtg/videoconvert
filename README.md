# Скрипты для Обработки Видео (Video Processing Scripts)

-----

## Описание Репозитория

Этот репозиторий представляет собой коллекцию утилит и скриптов, написанных преимущественно на **Python**, для автоматизации различных задач по обработке, конвертации и разделению видеофайлов. Инструменты созданы для упрощения работы с видеоконтентом, будь то подготовка роликов для публикации с соблюдением ограничений по размеру/длительности, или выполнение базовых операций по конвертации и наложению эффектов.

Скрипты используют мощные внешние инструменты, такие как **FFmpeg** и **mkvmerge** (из набора MKVToolNix), а также популярные Python-библиотеки, включая **MoviePy** и **OpenCV**.

### Основные Функции:

  * **Конвертация форматов:** Преобразование видеофайлов из одного формата в другой (например, AVI в MP4).
  * **Разделение видео:** Нарезка больших видеофайлов на более мелкие части по заданному размеру или длительности.
  * **Подготовка контента:** Обработка видео для социальных сетей (обрезание, изменение размера, добавление водяных знаков).
  * **Генерация эффектов:** Создание простого видео с визуальными эффектами.

-----

## Установка Зависимостей

Для работы большинства скриптов необходимы следующие компоненты:

1.  **FFmpeg** (должен быть доступен из командной строки).
2.  **mkvmerge** (часть MKVToolNix, также должен быть доступен в системном `PATH`).
3.  **Python 3** с установленными библиотеками:
      * `moviepy`
      * `opencv-python`
      * `numpy`

Установить необходимые Python-библиотеки можно командой:

```bash
pip install moviepy opencv-python numpy
```

-----

## Состав и Назначение Файлов

| Имя Файла | Тип | Назначение и Описание |
| :--- | :--- | :--- |
| `convert_avi_to_mp4.py` | Python | Скрипт для **конвертации** видеофайлов (включая AVI и VOB) в формат **MP4** или **MKV** с помощью **FFmpeg**. Содержит логику для проверки успешности конвертации и повторной попытки. |
| `convert_video_to_telegram.py` | Python (MoviePy) | Инструмент для **подготовки видео для платформ типа Telegram**. Выполняет кадрирование, изменение размера, объединение нескольких подклипов, добавление эффекта размытия (`blur`) и наложение текстового **водяного знака** с использованием кастомного шрифта. |
| `fluid.py` | Python (OpenCV) | Простой скрипт для **генерации видеофайла** (`output.mp4`) с **флюид-эффектом** или **шумом** с использованием библиотек **OpenCV** и `numpy`. |
| `lcdnova.ttf` | Шрифт (TTF) | Пользовательский файл шрифта **TrueType Font (TTF)**, используемый для стилизации текстовых элементов (например, водяного знака) в скрипте `convert_video_to_telegram.py`. |
| `split_video_by_size.sh` | Bash | Простой **скрипт оболочки** для операционных систем Linux/Bash, который запускает скрипт разделения видео на Python. |
| `split_video_size_500m_win.py` | Python (mkvmerge) | Скрипт для **разделения видеофайлов** на части размером **500 МБ** с помощью утилиты **mkvmerge**. Предназначен для использования в среде **Windows**. |
| `split_video_size_1500m_win.py` | Python (mkvmerge) | Скрипт для **разделения видеофайлов** на части размером **1500 МБ** с помощью утилиты **mkvmerge**. Предназначен для использования в среде **Windows**. |
| `split_video_size_linux.py` | Python (mkvmerge) | Скрипт для **разделения видеофайлов** с использованием **mkvmerge**. Настроен на работу с путями **Linux** и разделение по **длительности (5 минут)**. |
| `split_video_time_2_30_win.py` | Python (mkvmerge) | Скрипт для **разделения видеофайлов** на сегменты длительностью **2 минуты 30 секунд** с помощью **mkvmerge**. Предназначен для использования в среде **Windows**. |
| `video_looper_audio_mixing.env` | Конфигурация | **Файл переменных окружения**, который содержит параметры для внешнего инструмента, предназначенного для **зацикливания видео** (`VIDEO_LOOPS`) и **микширования нескольких аудиодорожек** (`AUDIO`, `MIX_AUDIO`) с указанием громкости. |

-----

## Инструкции по Использованию

Перед запуском любого скрипта необходимо **отредактировать пути** к входным и выходным директориям, указанные в начале файла (например, `dirName`, `dirNameOut` для скриптов разделения).

### Пример настройки разделения видео

В скриптах типа `split_video_size_500m_win.py` измените пути, соответствующие вашей операционной системе:

```python
# Windows
dirName = r"W:\001\VideoBig"   # Путь к исходным видео
dirNameOut = r"W:\001\VideoSmall" # Путь для сохранения частей

# Ubuntu (если бы был Linux-скрипт)
#dirName = r"/usr/www/upl2"
#dirNameOut = r"/usr/www/upl3"
```

После настройки запустите нужный скрипт через командную строку:

```bash
python split_video_size_500m_win.py
```
